# apt update -y
# apt install certbot -y
# mkdir -p /tools/harbor && cd /tools/harbor
# sudo chown $USER:$USER /tools/harbor
# curl -s https://api.github.com/repos/goharbor/harbor/releases/latest | grep browser_download_url | cut -d '"' -f 4 | grep '.tgz$' | wget -i -
# tar xvzf harbor-offline-installer*.tgz
# cd harbor/
# cp harbor.yml.tmpl harbor.yml

export DOMAIN="registry.bodevops.win"
export EMAIL="hson22102000@gmail.com"
sudo certbot certonly --standalone -d $DOMAIN --preferred-challenges http --agree-tos -m $EMAIL --keep-until-expiring


nano harbor.yml

-> hostname: registry.bodevop.win
-> certificate: /etc/letsencrypt/live/registry.bodevops.win/fullchain.pem
-> private_key: /etc/letsencrypt/live/registry.bodevops.win/privkey.pem
-> harbor_admin_password: bodevops


# Install docker
sudo mkdir -p /tools/docker && cd /tools/docker
sudo vim install-docker.sh
sudo chmod +x install-docker.sh

cd /tools/harbor/harbor
./prepare
./install.sh
docker-compose ps


Push on registry Harbor:
docker login registry.bodevops.win

docker build -t server-auto .
docker tag server-auto:latest registry.bodevops.win/automation/server-auto:latest
docker push registry.bodevops.win/automation/server-auto:latest

# /data/registry/docker/registry/v2/repositories => Nơi lưu các repositories